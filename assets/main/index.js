System.register("chunks:///_virtual/Actor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts","./MathUtil.ts","./ActorProperty.ts","./PhysicsGroup.ts","./Projectile.ts","./StateDefine.ts"],(function(t){"use strict";var e,i,n,r,o,a,l,s,c,u,h,d,p,f,g,y,m,S,v,A,b,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,l=t._decorator,s=t.v3,c=t.SkeletalAnimation,u=t.CCFloat,h=t.RigidBody,d=t.Collider,p=t.Animation,f=t.Vec3,g=t.math,y=t.Component},function(t){m=t.Events},function(t){S=t.MathUtil},function(t){v=t.ActorProperty},function(t){A=t.PhysicsGroup},function(t){b=t.Projectile},function(t){D=t.StateDefine}],execute:function(){var P,w,C,k,E,F,I,z,H;a._RF.push({},"5c5e9gBnQhJW7/a+5S0DRAd","Actor",void 0);var T=l.ccclass,M=l.property,R=(l.requireComponent,s());t("Actor",(P=T("Actor"),w=M(c),C=M(u),k=M(u),P((I=e((F=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"skeletalAnimation",I,r(e)),e.currState=D.Idle,e.collider=null,e.destForward=s(),n(e,"linearSpeed",z,r(e)),n(e,"angularSpeed",H,r(e)),e.rigidbody=null,e.actorProperty=new v,e}i(e,t);var a=e.prototype;return a.start=function(){var t,e;this.rigidbody=this.node.getComponent(h),this.collider=this.node.getComponent(d),null==(t=this.skeletalAnimation)||t.on(p.EventType.FINISHED,this.onAnimationFinished,this),null==(e=this.collider)||e.on("onTriggerEnter",this.onTriggerEnter,this)},a.onDestroy=function(){var t,e;null==(t=this.skeletalAnimation)||t.off(p.EventType.FINISHED,this.onAnimationFinished,this),null==(e=this.collider)||e.off("onTriggerEnter",this.onTriggerEnter,this)},a.update=function(t){if(this.currState!=D.Die){var e=S.signAngle(this.node.forward,this.destForward,f.UP),i=s(0,20*e,0);switch(this.rigidbody.setAngularVelocity(i),this.currState){case D.Run:this.doMove()}}},a.doMove=function(){var t,e=this.linearSpeed*this.destForward.length();R.x=g.clamp(this.node.forward.x,-1,1)*e,R.z=g.clamp(this.node.forward.z,-1,1)*e,null==(t=this.rigidbody)||t.setLinearVelocity(R)},a.stopMove=function(){var t;null==(t=this.rigidbody)||t.setLinearVelocity(f.ZERO)},a.changeState=function(t){var e;t==this.currState&&t!=D.Hit||this.currState!=D.Die&&(this.currState==D.Run&&this.stopMove(),null==(e=this.skeletalAnimation)||e.crossFade(t,.1),this.currState=t)},a.onAnimationFinished=function(t,e){e.name==D.Attack&&this.changeState(D.Idle),e.name==D.Hit&&this.changeState(D.Idle)},a.hurt=function(t,e,i){if(this.changeState(D.Hit),this.node.emit(m.onHurt,this.actorProperty),this.currState!=D.Die){var n;i.multiplyScalar(-1),null==(n=this.rigidbody)||n.applyImpulse(i),this.actorProperty.hp-=t,this.actorProperty.hp<=0&&(this.onDie(),null==e||e.node.emit(m.onEnemyKilled,this))}},a.onDie=function(){this.currState!=D.Die&&(this.changeState(D.Die),this.node.emit(m.onDead,this.node))},a.attack=function(){this.changeState(D.Attack)},a.respawn=function(){var t;null==(t=this.skeletalAnimation)||t.crossFade(D.Idle,.1),this.currState=D.Idle},a.onTriggerEnter=function(t){var i;if(A.isHurtable(t.otherCollider.getGroup(),this.collider.getGroup())){var n=null==(i=t.otherCollider.getComponent(b).host)?void 0:i.getComponent(e),r=s();f.subtract(r,t.otherCollider.node.worldPosition,t.selfCollider.node.worldPosition),r.normalize(),this.hurt(n.actorProperty.attack,n,r)}},o(e,[{key:"dead",get:function(){return this.currState==D.Die}}]),e}(y)).prototype,"skeletalAnimation",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(F.prototype,"linearSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),H=e(F.prototype,"angularSpeed",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 90}}),E=F))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/ActorManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Actor.ts","./StateDefine.ts","./EffectManager.ts","./Events.ts","./ResourceDefine.ts","./Pools.ts"],(function(e){"use strict";var n,t,i,o,a,s,r,c,u,m,l,f,h,y,v;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy,i=e._decorator,o=e.resources,a=e.Prefab,s=e.instantiate,r=e.director,c=e.math,u=e.Animation},function(e){m=e.Actor},function(e){l=e.StateDefine},function(e){f=e.EffectManager},function(e){h=e.Events},function(e){y=e.DynamicResourceDefine},function(e){v=e.Pools}],execute:function(){var d,g;t._RF.push({},"d4d0b0QOmNBVohHI8EIqwQh","ActorManager",void 0);var p=i.ccclass;i.property,e("ActorManager",p("ActorManager")(((g=function(){function e(){this.enemyPools=new v,this.enemyNames=[],this.enemies=[],this._playerActor=null}var t=e.prototype;return t.init=function(e){var n=this,t=y.Actor.Enemy.Path;o.loadDir(t,(function(){var i=[];o.getDirWithPath(t,a,i);for(var s=0,r=i;s<r.length;s++){var c=r[s],u=o.get(c.path,a);n.createEnemyPool(u)}e()}))},t.createEnemyPool=function(e){this.enemyNames.push(e.name),this.enemyPools.newPool(e.name,(function(){var n=s(e);return n.active=!1,r.getScene().addChild(n),n}),10,(function(e){e.removeFromParent()}))},t.clear=function(){this.enemyPools.destroyAll(),this.enemyNames=[],this.enemies=[]},t.createRandomEnemy=function(){var e=this.enemyNames[c.randomRangeInt(0,this.enemyNames.length)],n=this.enemyPools.allocc(e);return n.active=!0,this.enemies.push(n),n.once(h.onDead,this.onEnemyDead,this),n},t.onEnemyDead=function(e){var n=this;e.getComponent(m).skeletalAnimation.once(u.EventType.FINISHED,(function(t,i){if(i.name==l.Die){var o;n.enemyPools.free(e.name,e);var a=n.enemies.indexOf(e);n.enemies.splice(a,1),null==(o=f.instance)||o.play(y.Effect.EffDie,e.worldPosition),e.active=!1}}),this)},n(e,[{key:"playerActor",get:function(){return this._playerActor},set:function(e){this._playerActor=e}},{key:"randomEnemy",get:function(){return this.enemies[c.randomRangeInt(0,this.enemies.length)]}}],[{key:"instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}())._instance=void 0,d=g))||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/ActorProperty.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i;return{setters:[function(t){e=t.createClass},function(t){r=t.cclegacy,i=t.math}],execute:function(){r._RF.push({},"4bb48QIQq9E8IUxPkfpvwkV","ActorProperty",void 0);t("ActorProperty",function(){function t(){this.maxHp=100,this.hp=this.maxHp,this.attack=10,this.level=1,this.chaseRate=0,this.penetration=0,this.projectileCount=1,this.exp=0,this.maxExp=20}return e(t,[{key:"hpPercent",get:function(){return i.clamp01(this.hp/this.maxHp)}}]),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationEventListener.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.Component}],execute:function(){var i;e._RF.push({},"34d72yFhTZESaEyNkCs0A0r","AnimationEventListener",void 0);var a=o.ccclass;o.property,t("AnimationEventListener",a("AnimationEventListener")(i=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.onFrameAttackLoose=function(){var t;null==(t=this.node.parent)||t.emit("onFrameAttackLoose")},o.onFrameAttack=function(){var t;null==(t=this.node.parent)||t.emit("onFrameAttack")},e}(r))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Setting.ts","./Events.ts","./ResourceDefine.ts"],(function(n){"use strict";var t,e,i,o,a,s,u,c,r,g,f,l;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){i=n.cclegacy,o=n._decorator,a=n.resources,s=n.Prefab,u=n.instantiate,c=n.AudioSource,r=n.Component},function(n){g=n.Setting},function(n){f=n.Events},function(n){l=n.DynamicResourceDefine}],execute:function(){var m,h;i._RF.push({},"da542AFMdtI7oL5lEXx+IVW","AudioManager",void 0);var d=o.ccclass;o.property,n("AudioManager",d("AudioManager")(((h=function(n){function i(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(t=n.call.apply(n,[this].concat(i))||this).bgm=null,t.sfx=new Map,t}t(i,n);var o=i.prototype;return o.onLoad=function(){i._instance=this,g.instance.on(f.onBgmVolumeChanged,this.onBgmVolumeChanged,this)},o.onDestroy=function(){i._instance=null,g.instance.off(f.onBgmVolumeChanged,this.onBgmVolumeChanged,this)},o.init=function(){var n=this;a.load(l.audio.Bgm,s,(function(t,e){var i=u(e);n.node.addChild(i),n.bgm=i.getComponent(c)})),this.initSfx(l.audio.SfxHit),this.initSfx(l.audio.SfxShoot)},o.initSfx=function(n){var t=this;a.load(l.audio.Bgm,s,(function(e,i){var o=u(i);t.node.addChild(o);var a=o.getComponent(c);t.sfx.set(n,a)}))},o.playBgm=function(){if(this.bgm){this.bgm&&this.bgm.stop();var n=this.bgm.node;n.active=!0;var t=n.getComponent(c);t.volume=g.instance.bgmVolume,this.bgm=t}},o.playSfx=function(n){if(this.sfx.has(n)){var t=this.sfx.get(n).node;t.active=!0;var e=t.getComponent(c);e.volume=g.instance.sfxVolume,e.play()}},o.onBgmVolumeChanged=function(){this.bgm&&(this.bgm.volume=g.instance.bgmVolume)},e(i,null,[{key:"instance",get:function(){return this._instance}}]),i}(r))._instance=void 0,m=h))||m);i._RF.pop()}}}));

System.register("chunks:///_virtual/EffectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceDefine.ts","./Pools.ts"],(function(e){"use strict";var t,n,o,c,r,i,f,s,a,l;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,o=e._decorator,c=e.resources,r=e.Prefab,i=e.instantiate,f=e.director,s=e.ParticleSystem},function(e){a=e.DynamicResourceDefine},function(e){l=e.Pools}],execute:function(){var u,p;n._RF.push({},"901e1SR5zhM843v1DlhiRxy","EffectManager",void 0);var v=o.ccclass;o.property,e("EffectManager",v("EffectManager")(((p=function(){function e(){this.pools=new l}var n=e.prototype;return n.init=function(){var e=this;c.loadDir(a.Effect.Path,(function(){var t=c.get(a.Effect.EffExplore,r);e.pools.newPool(a.Effect.EffExplore,(function(){return i(t)}),50,(function(e){e.removeFromParent(),e.destroy()}));var n=c.get(a.Effect.EffDie,r);e.pools.newPool(a.Effect.EffDie,(function(){return i(n)}),50,(function(e){e.removeFromParent(),e.destroy()}))}))},n.destory=function(){e._instance=null,this.pools.destroyAll()},n.play=function(e,t){var n=this.pools.pool(e);this.playEffect(n,t)},n.playEffect=function(e,t){var n,o=e.alloc();null==(n=f.getScene())||n.addChild(o),o.worldPosition=t,o.active=!0;var c=o.getComponent(s);c.scheduleOnce((function(){o.active=!1,e.free(o)}),c.duration),c.play()},t(e,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}())._instance=void 0,u=p))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorManager.ts","./Actor.ts","./ProjectileEmiter.ts","./StateDefine.ts"],(function(t){"use strict";var e,r,i,o,a,n,s,c,l,h,u,d,g,f,p,m,y,w,k,A,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,n=t._decorator,s=t.v3,c=t.ccenum,l=t.CCFloat,h=t.Node,u=t.CCInteger,d=t.macro,g=t.Collider,f=t.game,p=t.Vec3,m=t.math,y=t.Component},function(t){w=t.ActorManager},function(t){k=t.Actor},function(t){A=t.ProjectileEmitter},function(t){P=t.StateDefine}],execute:function(){var C,b,v,E,R,z,I,S,F,T,j,D;t("EnemyCareer",void 0),a._RF.push({},"681881DCN5DU4xiS1Y6Y56i","EnemyController",void 0);var x,M=n.ccclass,_=n.property,L=n.requireComponent,N=s(),V=function(){};V.Chase="chase",V.Attack="attack",V.Idle="idle",function(t){t[t.Melee=0]="Melee",t[t.Range=1]="Range"}(x||(x=t("EnemyCareer",{}))),c(x);t("EnemyController",(C=M("EnemyController"),b=L(k),v=_(l),E=_({type:x}),R=_(h),z=_(u),C(I=b((F=e((S=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).actor=null,i(e,"attackRange",F,o(e)),i(e,"career",T,o(e)),e.target=null,e.aiType=V.Chase,e.projectileEmitter=void 0,i(e,"projectileStart",j,o(e)),i(e,"attackInterval",D,o(e)),e.lastAttackTime=0,e}r(e,t);var a=e.prototype;return a.start=function(){this.actor=this.node.getComponent(k),this.career==x.Range&&(this.projectileEmitter=this.node.getComponent(A)),this.schedule(this.executeAI,1,d.REPEAT_FOREVER,1),this.node.on("onFrameAttack",this.onFrameAttack,this),this.target=w.instance.playerActor},a.onDestroy=function(){this.unschedule(this.executeAI);this.node.getComponent(g);this.node.off("onFrameAttack",this.onFrameAttack,this)},a.executeAI=function(){if(null!=this.target&&(this.actor.currState==P.Idle||this.actor.currState==P.Run)){var t=f.totalTime-this.lastAttackTime>=this.attackInterval;if(this.target.currState==P.Die||!t)return this.aiType=V.Idle,void this.actor.changeState(V.Idle);if(p.distance(this.node.worldPosition,this.target.node.worldPosition)>this.attackRange)return this.aiType=V.Chase,this.actor.changeState(P.Run),p.subtract(N,this.target.node.worldPosition,this.node.worldPosition),N.normalize(),void this.actor.destForward.set(N.x,0,N.z);this.aiType=V.Attack,p.subtract(N,this.target.node.worldPosition,this.node.worldPosition),N.normalize(),this.actor.destForward.set(N.x,0,N.z),this.actor.node.forward.set(N.x,0,N.z),this.actor.changeState(P.Attack),this.lastAttackTime=f.totalTime}},a.isFaceTarget=function(){return p.subtract(N,this.target.node.worldPosition,this.node.worldPosition),N.y=0,N.normalize(),p.angle(this.node.forward,N)<m.toRadian(60)},a.onFrameAttack=function(){if(this.target)if(this.career==x.Melee){var t=s();if(p.subtract(t,this.target.node.worldPosition,this.node.worldPosition),p.angle(this.node.forward,t)<.5*Math.PI)t.length()<this.attackRange&&this.target.hurt(this.actor.actorProperty.attack,this.actor,t)}else{var e=this.projectileEmitter.create();e.node.worldPosition=this.projectileStart.worldPosition,e.target=this.target.node,e.host=this.node,p.subtract(N,this.target.node.worldPosition,this.node.worldPosition),N.normalize(),e.node.forward=N,e.fire()}},e}(y)).prototype,"attackRange",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),T=e(S.prototype,"career",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.Melee}}),j=e(S.prototype,"projectileStart",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(S.prototype,"attackInterval",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5e3}}),I=S))||I)||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/Events.ts",["cc"],(function(e){"use strict";var n,o;return{setters:[function(e){n=e.cclegacy,o=e._decorator}],execute:function(){var t,r;n._RF.push({},"315ab77QEhFqbdFITtTVlBT","Events",void 0);var a=o.ccclass;o.property,e("Events",a("Events")(((r=function(){}).onDead="onDead",r.onEnemyKilled="onKilled",r.onHurt="onHurt",r.onProjectileDead="onProjectileDead",r.onExpGain="onExpGain",r.onPlayerUpgrade="onPlayerUpgrade",r.onBgmVolumeChanged="onBgmVolumeChanged",t=r))||t);n._RF.pop()}}}));

System.register("chunks:///_virtual/FollowCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,r,o,n,a,l,s,c,u,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,l=t.v3,s=t.Node,c=t.Camera,u=t.Vec3,p=t.Component}],execute:function(){var d,h,f,m,g,w,y;n._RF.push({},"07f08km4ihDK7jVxMA9Bg+E","FollowCamera",void 0);var b=a.ccclass,v=a.property,P=l();t("FollowCamera",(d=b("FollowCamera"),h=v(s),f=v(c),d((w=i((g=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,r(i,"target",w,o(i)),r(i,"camera",y,o(i)),i.initialDirection=l(),i.speed=0,i}e(i,t);var n=i.prototype;return n.start=function(){u.subtract(this.initialDirection,this.node.worldPosition,this.target.worldPosition),this.camera.node.lookAt(this.target.worldPosition,u.UP)},n.update=function(t){u.add(P,this.target.worldPosition,this.initialDirection),this.node.setWorldPosition(P)},i}(p)).prototype,"target",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(g.prototype,"camera",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/Level.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Actor.ts","./AudioManager.ts","./EffectManager.ts","./UIManager.ts","./ActorManager.ts"],(function(n){"use strict";var e,t,a,i,s,r,o,c,l,p,u,h,d,w,f,m,g,v,R,y,P,A,M;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,a=n.initializerDefineProperty,i=n.assertThisInitialized,s=n.createClass},function(n){r=n.cclegacy,o=n._decorator,c=n.BoxCollider,l=n.Rect,p=n.v3,u=n.Size,h=n.v2,d=n.macro,w=n.math,f=n.director,m=n.randomRange,g=n.RigidBody,v=n.Component},function(n){R=n.Actor},function(n){y=n.AudioManager},function(n){P=n.EffectManager},function(n){A=n.UIManager},function(n){M=n.ActorManager}],execute:function(){var x,C,E,S,_,z;r._RF.push({},"7b1eeT+QbtCLaYVJWPeAOmh","Level",void 0);var L=o.ccclass,b=o.property;n("Level",(x=L("Level"),C=b(c),x(((z=function(n){function e(){for(var e,t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return e=n.call.apply(n,[this].concat(s))||this,a(e,"spawnCollider",_,i(e)),e.spawnRect=new l,e.spawnPos=p(),e.spawnHp=10,e.maxAlive=100,e}t(e,n);var r=e.prototype;return r.start=function(){var n=this;e._instance=this;var t=this.spawnCollider.node.worldPosition,a=this.spawnCollider.size;this.spawnRect.size=new u(a.x,a.z),this.spawnRect.center=h(t.x,t.z),M.instance.init((function(){A.instance.openPanel("UIGame",!1),A.instance.closePanel("UILoading",!0),n.startSpawnTimer()})),P.instance.init(),y.instance.init()},r.startSpawnTimer=function(){var n=this;this.schedule((function(){n.randomSpawn()}),1,15,3),this.schedule((function(){n.randomSpawn()}),1,d.REPEAT_FOREVER,10),this.schedule((function(){n.spawnHp*=1.2}),20,d.REPEAT_FOREVER)},r.onDestroy=function(){this.unscheduleAllCallbacks(),e._instance=null,A.instance.clearAllPanels(),M.instance.clear(),P.instance.destory()},r.randomSpawn=function(){M.instance.enemies.length>=this.maxAlive||M.instance.playerActor.dead||(this.spawnPos.x=w.randomRange(this.spawnRect.xMin,this.spawnRect.xMax),this.spawnPos.z=w.randomRange(this.spawnRect.yMin,this.spawnRect.yMax),this.doSpawn(this.spawnPos))},r.doSpawn=function(n){var e,t=M.instance.createRandomEnemy();t.setPosition(n),null==(e=f.getScene())||e.addChild(t);var a=m(1,2),i=t.getComponent(R);i.actorProperty.hp=this.spawnHp,i.actorProperty.maxHp=this.spawnHp,i.respawn();var s=t.getComponent(g);s.mass=a,t.scale=p(s.mass,s.mass,s.mass)},s(e,null,[{key:"instance",get:function(){return this._instance}}]),e}(v))._instance=void 0,_=e((S=z).prototype,"spawnCollider",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=S))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Actor.ts","./ActorProperty.ts","./AnimationEventListener.ts","./EnemyController.ts","./PhysicsGroup.ts","./PlayerController.ts","./Projectile.ts","./ProjectileEmiter.ts","./ProjectileProperty.ts","./StateDefine.ts","./AudioManager.ts","./FollowCamera.ts","./PlayerPreference.ts","./Setting.ts","./EffectManager.ts","./Events.ts","./VirtualInput.ts","./ActorManager.ts","./Level.ts","./ResourceDefine.ts","./ResourceManager.ts","./UIGame.ts","./UIIMageLabel.ts","./UIJoyStick.ts","./UIManager.ts","./UIPlayerLevel.ts","./UISetting.ts","./UISettlement.ts","./UISkillUpgrade.ts","./UIStartup.ts","./MathUtil.ts","./Pools.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MathUtil.ts",["cc"],(function(t){"use strict";var n,r,c;return{setters:[function(t){n=t.cclegacy,r=t.v3,c=t.Vec3}],execute:function(){n._RF.push({},"fffb9OhrEREyaBiNJ+p7SAC","MathUtil",void 0);var a=r(),s=r(),e=r(),i=r();t("MathUtil",function(){function t(){}return t.rotateAround=function(t,n,r,i){var o=Math.cos(i),u=Math.sin(i);c.multiplyScalar(a,n,o),c.cross(s,r,n),c.scaleAndAdd(e,a,s,u);var l=c.dot(r,n);c.scaleAndAdd(t,e,r,l*(1-o))},t.rotateToward=function(t,n,r,a){c.cross(i,n,r),this.rotateAround(t,n,i,a)},t.signAngle=function(t,n,r){var s=c.angle(t,n);return c.cross(a,t,n),s*Math.sign(r.x*a.x+r.y*a.y+r.z*a.z)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/PhysicsGroup.ts",["cc"],(function(e){"use strict";var t,r;return{setters:[function(e){t=e.cclegacy,r=e.PhysicsSystem}],execute:function(){t._RF.push({},"6b4573dmDRNPpgISAoTURvS","PhysicsGroup",void 0);var s=e("PhysicsGroup",function(){function e(){}return e.isHurtable=function(e,t){return e==this.Enemy?t==this.Player:e==this.PlayerProjectile?t==this.Enemy:e==this.EnemyProjectile&&t==this.Player},e}());s.Default=r.PhysicsGroup.DEFAULT,s.Player=2,s.Enemy=4,s.PlayerProjectile=8,s.EnemyProjectile=16,t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts","./VirtualInput.ts","./MathUtil.ts","./Actor.ts","./StateDefine.ts","./ProjectileEmiter.ts","./ActorManager.ts","./ResourceDefine.ts","./AudioManager.ts"],(function(t){"use strict";var e,o,r,n,i,a,s,c,l,h,u,p,d,f,y,m,g,v,P,w,A,C,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,i=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){s=t.cclegacy,c=t._decorator,l=t.v3,h=t.Node,u=t.Vec3,p=t.randomRange,d=t.math,f=t.Component},function(t){y=t.Events},function(t){m=t.VirtualInput},function(t){g=t.MathUtil},function(t){v=t.Actor},function(t){P=t.StateDefine},function(t){w=t.ProjectileEmitter},function(t){A=t.ActorManager},function(t){C=t.DynamicResourceDefine},function(t){b=t.AudioManager}],execute:function(){var E,F,j,x,D,R,S,k,L;s._RF.push({},"dccdbMnHTpOeoXNijGFHRCt","PlayerController",void 0);var _=c.ccclass,z=c.property,M=c.requireComponent,I=l();t("PlayerController",(E=_("PlayerController"),F=M(v),j=M(w),x=z(h),D=z(h),E(R=F(R=j((k=e((S=function(t){function e(){for(var e,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,r(e,"bow",k,n(e)),r(e,"bowstring",L,n(e)),e.projectileEmitter=void 0,e.shootDirection=l(),e._splitAngle=[0],e.actor=null,e}o(e,t);var s=e.prototype;return s.start=function(){this.actor=this.node.getComponent(v),A.instance.playerActor=this.actor,this.projectileEmitter=this.node.getComponent(w),this.node.on("onFrameAttackLoose",this.onFrameAttackLoose,this),this.node.on(y.onEnemyKilled,this.onKilled,this),this.projectileCount=2},s.onDestroy=function(){A.instance.playerActor=null,this.node.off("onFrameAttackLoose",this.onFrameAttackLoose,this),this.node.off(y.onEnemyKilled,this.onKilled,this)},s.update=function(t){if(this.actor.currState!=P.Die&&this.actor.currState!=P.Hit)if(this.handleInput()>.1)this.actor.changeState(P.Run);else{var e=this.getNeareastEnemy();e?(u.subtract(this.actor.destForward,e.worldPosition,this.node.worldPosition),this.actor.destForward.normalize(),this.actor.changeState(P.Attack)):this.actor.changeState(P.Idle)}},s.handleInput=function(){var t=m.horizontal,e=m.vertical;return this.actor.destForward.x=t,this.actor.destForward.z=-e,this.actor.destForward.y=0,this.actor.destForward.normalize(),this.actor.destForward.length()},s.onFrameAttackLoose=function(){b.instance.playSfx(C.audio.SfxShoot);var t=this.bowstring.worldPosition;u.subtract(this.shootDirection,this.bow.worldPosition,t),this.shootDirection.normalize();for(var e=0;e<this.projectileCount;e++){var o=this.projectileEmitter.create();g.rotateAround(I,this.node.forward,u.UP,this._splitAngle[e]),o.node.forward=I.clone(),o.node.worldPosition=t,o.host=this.node;var r=o.projectProperty;r.penetration=this.actor.actorProperty.penetration;var n=p(0,100)<this.actor.actorProperty.chaseRate;n&&(o.target=A.instance.randomEnemy,r.chase=n&&null!=o.target),null==o||o.fire()}},s.onKilled=function(t){var e=this.actor.actorProperty;e.exp++,this.node.emit(y.onExpGain),e.exp>=e.maxExp&&(e.exp-=e.maxExp,e.maxExp*=1.1,e.level++,this.onUpgradeLevel())},s.onUpgradeLevel=function(){this.node.emit(y.onPlayerUpgrade)},s.getNeareastEnemy=function(){var t=A.instance.enemies;if(!t||0==(null==t?void 0:t.length))return null;for(var e,o=99999,r=null,n=i(t);!(e=n()).done;){var a=e.value;if(!a.getComponent(v).dead){var s=u.distance(this.node.worldPosition,a.worldPosition);s<o&&(o=s,r=a)}}return r},a(e,[{key:"projectileCount",get:function(){return this.actor.actorProperty.projectileCount},set:function(t){var e=this.actor.actorProperty;t<=0&&(e.projectileCount=1),e.projectileCount=t,this._splitAngle=[];for(var o=d.toRadian(10),r=t%2!=0,n=Math.floor(e.projectileCount/2),i=0;i<n;i++)this._splitAngle.push(-o*(i+1)),this._splitAngle.push(o*(i+1));r&&this._splitAngle.push(0)}},{key:"chaseRate",get:function(){return this.actor.actorProperty.chaseRate},set:function(t){this.actor.actorProperty.chaseRate=d.clamp(this.actor.actorProperty.chaseRate+t,0,100)}},{key:"penetraion",set:function(t){this.actor.actorProperty.penetration=d.clamp(this.actor.actorProperty.penetration+t,0,100)}}]),e}(f)).prototype,"bow",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(S.prototype,"bowstring",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=S))||R)||R)||R));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerPreference.ts",["cc"],(function(e){"use strict";var r,t,c;return{setters:[function(e){r=e.cclegacy,t=e._decorator,c=e.sys}],execute:function(){var n;r._RF.push({},"f3a38Xq7u5H5pMw7NZcYTeR","PlayerPreference",void 0);var a=t.ccclass;t.property,e("PlayerPreference",a("PlayerPreference")(n=function(){function e(){}return e.setFloat=function(e,r){c.localStorage.setItem(e,r.toString())},e.getFloat=function(e){var r=c.localStorage.getItem(e);return Number.parseFloat(r)},e}())||n);r._RF.pop()}}}));

System.register("chunks:///_virtual/Pools.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var t,e,r,s;return{setters:[function(o){t=o.createForOfIteratorHelperLoose},function(o){e=o.cclegacy,r=o._decorator,s=o.Pool}],execute:function(){var n;e._RF.push({},"d02211hwWxKIofIC1Wt9tUE","Pools",void 0);var l=r.ccclass;r.property,o("Pools",l("Pools")(n=function(){function o(){this.pools=new Map}var e=o.prototype;return e.pool=function(o){return this.pools.get(o)},e.newPool=function(o,t,e,r){var n=new s(t,e,r);this.pools.set(o,n)},e.allocc=function(o){return this.pool(o).alloc()},e.free=function(o,t){this.pool(o).free(t)},e.destory=function(o){this.pool(o).destroy()},e.destroyAll=function(){for(var o,e=t(this.pools.values());!(o=e()).done;){o.value.destroy()}this.pools.clear()},o}())||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/Projectile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./EffectManager.ts","./Events.ts","./ResourceDefine.ts","./MathUtil.ts","./ProjectileProperty.ts"],(function(t){"use strict";var e,r,i,o,n,a,s,l,c,u,p,f,d,h,y,g,P,m,v,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,s=t._decorator,l=t.v3,c=t.Collider,u=t.CCFloat,p=t.ParticleSystem,f=t.Vec3,d=t.math,h=t.Component},function(t){y=t.AudioManager},function(t){g=t.EffectManager},function(t){P=t.Events},function(t){m=t.DynamicResourceDefine},function(t){v=t.MathUtil},function(t){w=t.ProjectileProperty}],execute:function(){var j,E,S,b,T,D,C,F,M;a._RF.push({},"833cdo40JJKyKEEQFf6FFDv","Projectile",void 0);var z=s.ccclass,A=s.property,R=l();t("Projectile",(j=z("Projectile"),E=A(c),S=A(u),b=A(u),j((C=e((D=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(e,"collider",C,o(e)),e.startTime=0,e.position=l(),e.projectProperty=new w,e.host=null,e.target=null,e.forward=l(),i(e,"angularSpeed",F,o(e)),i(e,"linearSpeed",M,o(e)),e.particleSystems=[],e}r(e,t);var a=e.prototype;return a.start=function(){var t;null==(t=this.collider)||t.on("onTriggerEnter",this.onTriggerEnter,this),this.particleSystems=this.node.getComponentsInChildren(p)},a.onDisable=function(){for(var t,e=n(this.particleSystems);!(t=e()).done;){t.value.stop()}},a.onDestroy=function(){this.collider.off("onTriggerEnter",this.onTriggerEnter,this)},a.fire=function(){this.startTime=0;for(var t,e=n(this.particleSystems);!(t=e()).done;){t.value.play()}},a.update=function(t){var e;if(this.startTime+=t,this.startTime>=this.projectProperty.liftTime&&this.node.emit(P.onProjectileDead,this),null!=(e=this.projectProperty)&&e.chase){f.subtract(this.forward,this.target.worldPosition,this.node.worldPosition),this.forward.y=0,this.forward.normalize();var r=this.angularSpeed*t;v.rotateToward(R,this.node.forward,this.forward,d.toRadian(r)),this.node.forward=R}f.scaleAndAdd(this.position,this.node.worldPosition,this.node.forward,this.linearSpeed*t),this.node.worldPosition=this.position},a.onTriggerEnter=function(t){var e;this.projectProperty.penetration--,this.projectProperty.penetration<=0&&this.node.emit(P.onProjectileDead,this),null==(e=g.instance)||e.play(m.Effect.EffExplore,t.selfCollider.node.worldPosition),y.instance.playSfx(m.audio.SfxHit)},e}(h)).prototype,"collider",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(D.prototype,"angularSpeed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 180}}),M=e(D.prototype,"linearSpeed",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=D))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/ProjectileEmiter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts","./Projectile.ts"],(function(e){"use strict";var t,o,r,n,i,c,l,a,s,u,p,f,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,l=e.Prefab,a=e.Pool,s=e.instantiate,u=e.director,p=e.Component},function(e){f=e.Events},function(e){P=e.Projectile}],execute:function(){var d,h,j,v,b;i._RF.push({},"a6734z3l21OnqOZbjwsAUWp","ProjectileEmiter",void 0);var m=c.ccclass,y=c.property;e("ProjectileEmitter",(d=m("ProjectileEmitter"),h=y(l),d((b=t((v=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,r(t,"projectile",b,n(t)),t.prefabPool=null,t}o(t,e);var i=t.prototype;return i.start=function(){var e=this;this.prefabPool=new a((function(){return s(e.projectile)}),5,(function(e){e.removeFromParent()}))},i.onDestroy=function(){this.prefabPool.destroy()},i.create=function(){console.log(">>>>>>>>",this.node.name);var e=this.prefabPool.alloc();return null==e.parent&&u.getScene().addChild(e),e.active=!0,e.once(f.onProjectileDead,this.onProjectileDead,this),e.getComponent(P)},i.onProjectileDead=function(e){e.node.active=!1,this.prefabPool.free(e.node)},t}(p)).prototype,"projectile",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=v))||j));i._RF.pop()}}}));

System.register("chunks:///_virtual/ProjectileProperty.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"cfa67X3sY5LTY4WlphZqAZR","ProjectileProperty",void 0);t("ProjectileProperty",(function(){this.penetration=1,this.liftTime=3,this.chase=!1}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceDefine.ts",["cc"],(function(e){"use strict";var f;return{setters:[function(e){f=e.cclegacy}],execute:function(){f._RF.push({},"584deKf/w5ArZ+2GBmhjMt0","ResourceDefine",void 0);e("DynamicResourceDefine",{directory:["effect","audio","actor","ui"],Actor:{Enemy:{Path:"actor/prefab/enemy"}},Effect:{Path:"effect/prefab/",EffExplore:"effect/prefab/EffExplore",EffDie:"effect/prefab/EffDie"},audio:{Bgm:"audio/prefab/Bgm",SfxHit:"audio/prefab/SfxHit",SfxShoot:"audio/prefab/SfxShoot"}});f._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var s,t;return{setters:[function(e){s=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"fa248kvosxBr5o9jT+OC1tl","ResourceManager",void 0);var a=e("ResourceManager",function(){function e(){this.assets=new Map}var t=e.prototype;return t.cacheAsset=function(e,s){s.addRef(),this.assets.set(e,s)},t.releaseAsset=function(e,s){this.assets.has(e)&&(this.assets.get(e).decRef(),this.assets.delete(e))},t.releaseAllAssets=function(){for(var e,t=s(this.assets.values());!(e=t()).done;){e.value.decRef()}this.assets.clear()},e}());e("ResManager",new a);t._RF.pop()}}}));

System.register("chunks:///_virtual/Setting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts","./PlayerPreference.ts"],(function(t){"use strict";var e,n,o,s,u,i,l,r;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,s=t._decorator,u=t.math,i=t.EventTarget},function(t){l=t.Events},function(t){r=t.PlayerPreference}],execute:function(){var c,m;o._RF.push({},"d4963rXtYVBXJF2S69IR6OU","Setting",void 0);var a=s.ccclass;s.property,t("Setting",a("Setting")(((m=function(t){function o(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this)._bgmVolume=1,e._sfxVolume=1,e}return e(o,t),o.prototype.load=function(){this._bgmVolume=r.getFloat("bgmVolume"),isNaN(this._bgmVolume)&&(this._bgmVolume=1),this._sfxVolume=r.getFloat("sfxVolume"),isNaN(this._sfxVolume)&&(this._sfxVolume=1)},n(o,[{key:"bgmVolume",get:function(){return this._bgmVolume},set:function(t){this._bgmVolume=u.clamp01(t),r.setFloat("bgmVolume",t),this.emit(l.onBgmVolumeChanged,this._bgmVolume)}},{key:"sfxVolume",get:function(){return this._sfxVolume},set:function(t){this._sfxVolume=u.clamp01(t),r.setFloat("sfxVolume",t)}}],[{key:"instance",get:function(){return this._instance}}]),o}(i))._instance=new m,c=m))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/StateDefine.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var i;t("StateDefine",void 0),e._RF.push({},"693b4+FMaVCmaylNs+Ipawl","StateDefine",void 0),function(t){t.Idle="idle",t.Attack="attack",t.Hit="hit",t.Run="run",t.Die="die"}(i||(i=t("StateDefine",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/UIGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts","./ActorManager.ts","./UIIMageLabel.ts","./UIManager.ts"],(function(e){"use strict";var n,t,r,a,o,i,s,u,l,p,c,f,g,h,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,s=e.ProgressBar,u=e.resources,l=e.director,p=e.Component},function(e){c=e.Events},function(e){f=e.ActorManager},function(e){g=e.UIIMageLabel},function(e){h=e.UIManager,d=e.DialogDef}],execute:function(){var x,y,U,b,m,v,I,G,E;o._RF.push({},"95a5elLuyJDjpTJNviOUl8x","UIGame",void 0);var P=i.ccclass,D=i.property;e("UIGame",(x=P("UIGame"),y=D(s),U=D(g),b=D(s),x((I=n((v=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return n=e.call.apply(e,[this].concat(o))||this,r(n,"expBar",I,a(n)),r(n,"expLabel",G,a(n)),r(n,"hpBar",E,a(n)),n.isPaused=!1,n.labelPause=null,n.btnSetting=null,n}t(n,e);var o=n.prototype;return o.start=function(){var e=f.instance.playerActor;e.node.on(c.onExpGain,this.onExpGain,this),e.node.on(c.onPlayerUpgrade,this.onUpgrade,this),e.node.on(c.onHurt,this.onHurt,this),this.onExpGain()},o.onDestroy=function(){var e=f.instance.playerActor;e.node.off(c.onExpGain,this.onExpGain,this),e.node.off(c.onPlayerUpgrade,this.onUpgrade,this),e.node.off(c.onHurt,this.onHurt,this)},o.onExitGame=function(){u.releaseUnusedAssets(),l.loadScene("startup")},o.onPauseGame=function(){l.isPaused()?l.resume():l.pause()},o.onOpenSetting=function(){h.instance.showDialog(d.UISetting)},o.onUpgrade=function(){h.instance.showDialog(d.UISkillUpgrade)},o.onExpGain=function(){if(f.instance.playerActor){var e=f.instance.playerActor.actorProperty;this.expBar.progress=e.exp/e.maxExp,this.expLabel.string=e.exp.toFixed()+"/"+e.maxExp.toFixed()}},o.onHurt=function(e){this.hpBar.progress=e.hpPercent},n}(p)).prototype,"expBar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(v.prototype,"expLabel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(v.prototype,"hpBar",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIIMageLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,o,i,a,s,u,l,c,p,f,g,h,v,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose,a=e.createClass},function(e){s=e.cclegacy,u=e._decorator,l=e.Layout,c=e.Prefab,p=e.Pool,f=e.instantiate,g=e.resources,h=e.SpriteFrame,v=e.Sprite,m=e.Component}],execute:function(){var d,y,b,P,I,L;s._RF.push({},"09813pwpeNH74o4/A1fA7In","UIIMageLabel",void 0);var S=u.ccclass,_=u.property,F=u.requireComponent,C=new Map;C.set("/","Slash");e("UIIMageLabel",(d=S("UIIMageLabel"),y=F(l),b=_(c),d(P=y((L=t((I=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this)._string="",n(t,"numPrefab",L,o(t)),t.numPool=null,t.layout=void 0,t}r(t,e);var s=t.prototype;return s.onLoad=function(){var e=this;this.layout=this.node.getComponent(l),this.numPool=new p((function(){var t=f(e.numPrefab);return t.active=!1,t}),1,(function(e){e.removeFromParent()}))},s.onDestroy=function(){this.numPool.destroy()},s.clearString=function(){for(var e,t=i(this.node.children);!(e=t()).done;){var r=e.value;r.active=!1,this.numPool.free(r)}},s.resetString=function(){var e=this;this.clearString();var t="ui/art/num/";g.loadDir(t,(function(){for(var r=0;r<e.string.length;r++){var n=e.string[r].toString();C.has(n)&&(n=C.get(n));var o=t+n+"/spriteFrame",i=g.get(o,h),a=e.numPool.alloc();null==a.parent&&e.node.addChild(a),a.active=!0,a.setSiblingIndex(r),a.getComponent(v).spriteFrame=i}e.layout.updateLayout()}))},a(t,[{key:"string",get:function(){return this._string},set:function(e){this._string!=e&&(this._string=e,this.resetString())}}]),t}(m)).prototype,"numPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=I))||P)||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIJoyStick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VirtualInput.ts"],(function(t){"use strict";var i,o,n,e,r,s,c,h,u,a,l,p,d,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Sprite,h=t.CCFloat,u=t.v3,a=t.Input,l=t.Vec3,p=t.math,d=t.Component},function(t){y=t.VirtualInput}],execute:function(){var T,f,v,g,S,E,b,U,C;r._RF.push({},"bf86b3lPC1EoplS5UNaxqc7","UIJoyStick",void 0);var m=s.ccclass,k=s.property;t("UIJoyStick",(T=m("UIJoyStick"),f=k(c),v=k(c),g=k(h),T((b=i((E=function(t){function i(){for(var i,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,n(i,"thumbnail",b,e(i)),n(i,"joyStickBg",U,e(i)),n(i,"radius",C,e(i)),i.initJoyStickBgPosition=u(),i}o(i,t);var r=i.prototype;return r.start=function(){this.node.on(a.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(a.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(a.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(a.EventType.TOUCH_START,this.onTouchStart,this),this.initJoyStickBgPosition=this.joyStickBg.node.worldPosition.clone()},r.onDestroy=function(){this.node.off(a.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(a.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(a.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.off(a.EventType.TOUCH_START,this.onTouchStart,this)},r.onTouchStart=function(t){var i=t.touch.getUILocationX(),o=t.touch.getUILocationY();this.joyStickBg.node.setWorldPosition(i,o,0)},r.onTouchMove=function(t){var i=t.touch.getUILocationX(),o=t.touch.getUILocationY(),n=new l(i,o,0),e=u();this.joyStickBg.node.inverseTransformPoint(e,n);var r=u(),s=e.length();e.normalize(),l.scaleAndAdd(r,u(),e,p.clamp(s,0,this.radius)),this.thumbnail.node.setPosition(r),y.horizontal=this.thumbnail.node.position.x/this.radius,y.vertical=this.thumbnail.node.position.y/this.radius},r.onTouchEnd=function(t){this.thumbnail.node.setPosition(u()),y.horizontal=0,y.vertical=0,this.joyStickBg.node.worldPosition=this.initJoyStickBgPosition},i}(d)).prototype,"thumbnail",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(E.prototype,"joyStickBg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(E.prototype,"radius",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 130}}),S=E))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,o,a,s,r,l;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,n=e.createClass},function(e){i=e.cclegacy,o=e._decorator,a=e.find,s=e.resources,r=e.Prefab,l=e.instantiate}],execute:function(){var c,u;e("DialogDef",void 0),i._RF.push({},"917942xq4tL7Z/UBLBoCGPJ","UIManager",void 0);var h,f=o.ccclass;o.property;!function(e){e.UISetting="UISetting",e.UISkillUpgrade="UISkillUpgrade",e.UISettlement="UISettlement"}(h||(h=e("DialogDef",{})));e("UIManager",f("UIManager")(((u=function(){function e(){this.uiRoot=null,this.panels=new Map}var i=e.prototype;return i.openPanel=function(e,t){var n=this;if(void 0===t&&(t=!0),this.uiRoot||(this.uiRoot=a("UIRoot")),this.panels.has(e)){var i=this.panels.get(e);return i.active=!0,void(t&&i.setSiblingIndex(this.uiRoot.children.length-1))}s.load("ui/prefab/"+e,r,(function(i,o){var a=l(o);n.uiRoot.addChild(a),n.panels.set(e,a),t&&a.setSiblingIndex(n.uiRoot.children.length-1)}))},i.closePanel=function(e,t){if(void 0===t&&(t=!1),this.panels.has(e)){var n=this.panels.get(e);n&&(t?n.removeFromParent():n.active=!1)}},i.showDialog=function(e){for(var t in h)t==e?this.openPanel(t):this.closePanel(t)},i.closeDialog=function(){for(var e in h)this.closePanel(e)},i.clearAllPanels=function(){for(var e,n=t(this.panels.values());!(e=n()).done;){e.value.removeFromParent()}this.panels=new Map,this.uiRoot=null},n(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,c=u))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIPlayerLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts","./ActorManager.ts","./UIIMageLabel.ts"],(function(e){"use strict";var t,r,n,o,a,l,i;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator,o=e.Component},function(e){a=e.Events},function(e){l=e.ActorManager},function(e){i=e.UIIMageLabel}],execute:function(){var c;r._RF.push({},"2139836NiRM+ZuBsTLXhpEM","UIPlayerLevel",void 0);var s=n.ccclass,u=(n.property,n.requireComponent);e("UIPlayerLevel",s("UIPlayerLevel")(c=u(i)(c=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).level=void 0,t}t(r,e);var n=r.prototype;return n.start=function(){this.level=this.node.getComponent(i);var e=l.instance.playerActor;e.node.on(a.onPlayerUpgrade,this.onPlayerUpgrade,this),this.level.string=e.actorProperty.level.toString()},n.onPlayerUpgrade=function(){this.level.string=l.instance.playerActor.actorProperty.level.toString()},r}(o))||c)||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/UISetting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Setting.ts","./UIManager.ts"],(function(e){"use strict";var s,o,t,n,r,l,i,g,u,m;return{setters:[function(e){s=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator,n=e.Slider,r=e.ProgressBar,l=e.Button,i=e.math,g=e.Component},function(e){u=e.Setting},function(e){m=e.UIManager}],execute:function(){var a;o._RF.push({},"5897aUFJIxPSoJh5ulolgzc","UISetting",void 0);var h=t.ccclass;t.property,e("UISetting",h("UISetting")(a=function(e){function o(){for(var s,o=arguments.length,t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];return(s=e.call.apply(e,[this].concat(t))||this).sliderBgmVolume=null,s.progressBgmVolume=null,s.sliderSfxVolume=null,s.progressSfxVolume=null,s.btnClose=null,s}s(o,e);var t=o.prototype;return t.start=function(){this.sliderBgmVolume=this.node.getChildByName("Bgm").getComponent(n),this.sliderBgmVolume.node.on("slide",this.onBgmVolumeChanged,this),this.progressBgmVolume=this.sliderBgmVolume.node.getChildByName("ProgressBar").getComponent(r),this.sliderSfxVolume=this.node.getChildByName("Sfx").getComponent(n),this.sliderSfxVolume.node.on("slide",this.onSfxVolumeChanged,this),this.progressSfxVolume=this.sliderSfxVolume.node.getChildByName("ProgressBar").getComponent(r),this.sliderBgmVolume.progress=u.instance.bgmVolume,this.sliderSfxVolume.progress=u.instance.sfxVolume,this.progressBgmVolume.progress=u.instance.bgmVolume,this.progressSfxVolume.progress=u.instance.sfxVolume,this.btnClose=this.node.getChildByName("BtnClose"),this.btnClose.on(l.EventType.CLICK,this.onClose,this)},t.onDisable=function(){var e;null==(e=this.btnClose)||e.off(l.EventType.CLICK,this.onClose,this)},t.onBgmVolumeChanged=function(e){u.instance.bgmVolume=i.clamp01(e.progress),this.progressBgmVolume.progress=e.progress},t.onSfxVolumeChanged=function(e){u.instance.sfxVolume=i.clamp01(e.progress),this.progressSfxVolume.progress=e.progress},t.onClose=function(){m.instance.closePanel(this.node.name,!1)},o}(g))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/UISettlement.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,c,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,c=t.director,o=t.Component}],execute:function(){var s;n._RF.push({},"e6f6c+HXK1NY6PrLAwRNc2I","UISettlement",void 0);var u=r.ccclass;r.property,t("UISettlement",u("UISettlement")(s=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.resStartGame=function(){c.loadScene("game",null)},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/UISkillUpgrade.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerController.ts","./ActorManager.ts"],(function(e){"use strict";var t,r,n,o,a,l,i;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator,o=e.director,a=e.Component},function(e){l=e.PlayerController},function(e){i=e.ActorManager}],execute:function(){var c;r._RF.push({},"c4cbaOEaO9OwLXunJ4fVhsu","UISkillUpgrade",void 0);var s=n.ccclass;n.property,e("UISkillUpgrade",s("UISkillUpgrade")(c=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).playerController=null,t}t(r,e);var n=r.prototype;return n.onEnable=function(){this.playerController=i.instance.playerActor.getComponent(l),o.pause()},n.onDisable=function(){o.resume()},n.onUpgradePenetration=function(){this.playerController.penetraion+=10,this.node.active=!1},n.onUpgradeProjectileCount=function(){this.playerController.projectileCount++,this.node.active=!1},n.onUpgradeChaseRate=function(){this.playerController.chaseRate+=10,this.node.active=!1},r}(a))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/UIStartup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Setting.ts"],(function(t){"use strict";var n,e,r,o,i,c,a;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,o=t.Button,i=t.director,c=t.Component},function(t){a=t.Setting}],execute:function(){var u;e._RF.push({},"2b8catifdpDdIjSWIx3YDA7","UIStartup",void 0);var s=r.ccclass;r.property,t("UIStartup",s("UIStartup")(u=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.start=function(){this.node.getChildByName("BtnStart").on(o.EventType.CLICK,this.onClickEnterGame,this),a.instance.load()},r.onClickEnterGame=function(){i.loadScene("game")},e}(c))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/VirtualInput.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,n,e;return{setters:[function(t){r=t.createClass},function(t){n=t.cclegacy,e=t._decorator}],execute:function(){var i,u;n._RF.push({},"cf9f2aePtlNWa0BC7ltrhAm","VirtualInput",void 0);var c=e.ccclass;e.property,t("VirtualInput",c("VirtualInput")(((u=function(){function t(){}return r(t,null,[{key:"horizontal",get:function(){return this._horizontal},set:function(t){this._horizontal=t}},{key:"vertical",get:function(){return this._vertical},set:function(t){this._vertical=t}}]),t}())._horizontal=0,u._vertical=0,i=u))||i);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});